# G-Code 시뮬레이터 - 향후 개발 계획

> 작성일: 2025-12-12
>
> **현재 상태**: CLAUDE.md 참조
>
> 이 문서는 향후 개발 계획만 다룹니다.

---

## 📊 현재 vs 프로페셔널 시뮬레이터 비교

### ✅ 이미 구현된 강점
- **실시간 3D/2D 시각화** (60 FPS) ⭐⭐⭐⭐⭐
- **툴패스 표시** (색상별 구분) ⭐⭐⭐⭐
- **DXF/DWG 지원** (적응형 곡선) ⭐⭐⭐⭐
- **실시간 편집** (GUI + 자동 재파싱) ⭐⭐⭐⭐⭐
- **시간 기반 시뮬레이션** (피더 속도 반영) ⭐⭐⭐⭐
- **한붓그리기 최적화** ⭐⭐⭐⭐
- **구문 강조** (AvalonEdit) ⭐⭐⭐⭐

### ❌ 필요한 프로페셔널 기능

| 기능 | 중요도 | 난이도 |
|------|--------|--------|
| **재료 제거 시뮬레이션** | 🔴 매우 높음 | 🟠 어려움 |
| **충돌 감지** | 🔴 매우 높음 | 🟠 어려움 |
| **공구 라이브러리** | 🟡 높음 | 🟢 쉬움 |
| **가공 시간 계산** | 🟡 높음 | 🟢 쉬움 |
| **에러/경고 시스템** | 🟡 높음 | 🟢 중간 |
| **측정 도구** | 🟡 중간 | 🟢 쉬움 |
| **단면 뷰** | 🔵 낮음 | 🟠 중간 |
| **G-code 최적화** | 🔵 낮음 | 🟠 어려움 |

---

## 🎯 개발 로드맵 (Phase 1-5)

### 🔥 Phase 1: 핵심 기능 완성 (1-2주)

#### 1.1 공구 관리 시스템 ⭐⭐⭐⭐⭐
- 공구 라이브러리 (직경, 길이, 타입)
- T 코드 파싱
- 현재 공구 정보 표시
- 3D 뷰에서 공구 형상 표시

#### 1.2 가공 시간 및 통계 정보 ⭐⭐⭐⭐⭐
- 예상 가공 시간 표시
- 총 이동 거리 (급속/절삭/원호)
- 진행률 바
- 경과 시간 vs 남은 시간

#### 1.3 에러 감지 및 경고 시스템 ⭐⭐⭐⭐⭐
- 작업 범위 초과 체크
- 피드 속도 검증
- 급격한 방향 전환 감지
- Z축 급강하 감지
- 에러/경고 패널 (Visual Studio 스타일)

#### 1.4 키보드 단축키 ⭐⭐⭐⭐
- 파일 관리: Ctrl+O, Ctrl+S
- 시뮬레이션: Space (재생/일시정지), Home (리셋)
- 단계 이동: 방향키
- 재생 속도: Ctrl+Plus/Minus
- 뷰 제어: F (Fit to View), G (그리드 토글)

---

### 🚀 Phase 2: 프로페셔널 기능 (2-3주)

#### 2.1 재료 제거 시뮬레이션 (Virtual Stock) ⭐⭐⭐⭐⭐
- Voxel 기반 재료 모델
- 공구 타입별 제거 (엔드밀, 볼노즈 등)
- 실시간 재료 렌더링
- 최종 형상 확인

#### 2.2 충돌 감지 시스템 ⭐⭐⭐⭐⭐
- 공구-스톡 충돌 (과절삭)
- 공구-테이블 충돌
- 기계 행정 초과
- 충돌 지점 시각화

#### 2.3 측정 도구 ⭐⭐⭐⭐
- 거리 측정
- 각도 측정
- 측정선 3D/2D 표시
- 측정 목록 관리

---

### 🎨 Phase 3: 사용성 개선 (1-2주)

#### 3.1 2D 마우스 조작 ⭐⭐⭐⭐⭐
- 마우스 휠: 확대/축소
- 중간 버튼 드래그: 이동
- 더블클릭: 뷰 리셋
- Fit to View 기능
- 확대/축소 비율 표시

#### 3.2 뷰포트 프리셋 ⭐⭐⭐⭐
- 상단/전면/우측/등각 뷰
- 단축키 지원 (숫자 키패드)

#### 3.3 최근 파일 목록 ⭐⭐⭐
- 최근 열었던 파일 10개 저장
- File 메뉴에 표시
- Ctrl+1~9 빠른 열기

#### 3.4 드래그 앤 드롭 ⭐⭐⭐
- G-code, DXF, DWG 파일 드롭 지원
- 자동 파일 타입 감지

#### 3.5 북마크 시스템 ⭐⭐⭐
- Ctrl+B로 현재 위치 북마크
- 더블클릭으로 북마크 이동
- 북마크 내보내기/가져오기

---

### 🔬 Phase 4: 고급 기능 (2-4주)

#### 4.1 M 코드 지원 ⭐⭐⭐⭐
- M3/M4/M5: 스핀들 제어
- M6: 공구 교환
- M8/M9: 쿨런트 제어
- M30: 프로그램 종료
- 기계 상태 표시 패널

#### 4.2 G-code 최적화 엔진 ⭐⭐⭐
- 불필요한 코드 제거
- 소수점 자릿수 최적화
- 짧은 이동 병합
- 최적화 전/후 비교

#### 4.3 시뮬레이션 녹화 ⭐⭐⭐
- 스크린샷 기능
- (선택) 비디오 녹화 (FFmpeg)

#### 4.4 비교 모드 ⭐⭐⭐
- 두 G-code 파일 비교
- 차이점 강조 표시
- Diff 뷰어

#### 4.5 다중 축 지원 (4축, 5축) ⭐⭐
- A, B, C 회전축 파싱
- 5축 시각화

---

### 🎛️ Phase 5: 설정 및 커스터마이징 (1주)

#### 5.1 설정 대화상자 ⭐⭐⭐⭐
- 기계 설정 (작업 범위, 속도 제한)
- 시각화 설정 (경로 색상, 선 두께)
- 성능 설정 (하드웨어 가속, 안티앨리어싱)
- 일반 설정 (자동 로드, 언어)

#### 5.2 테마 시스템 (다크 모드) ⭐⭐⭐
- 라이트/다크 테마
- ResourceDictionary 기반
- 설정 저장

---

## 📈 우선순위 매트릭스

### 높은 영향 | 낮은 난이도 (먼저!) ⭐⭐⭐⭐⭐
```
• 공구 관리 시스템
• 가공 시간 통계
• 키보드 단축키
• 2D 마우스 조작
• 드래그 앤 드롭
• 최근 파일 목록
```

### 높은 영향 | 높은 난이도 (신중하게) ⭐⭐⭐⭐
```
• 재료 제거 시뮬레이션
• 충돌 감지 시스템
• 에러/경고 시스템
```

### 낮은 영향 | 낮은 난이도 (틈날 때) ⭐⭐⭐
```
• 북마크 시스템
• 뷰포트 프리셋
• 측정 도구
• 설정 대화상자
• 다크 모드
```

### 낮은 영향 | 높은 난이도 (나중에) ⭐⭐
```
• 4/5축 지원
• G-code 최적화
• 시뮬레이션 녹화
```

---

## 🏆 추천 개발 순서 (다음 4주)

### Week 1: 빠른 성과 (Quick Wins)
1. 공구 관리 시스템 (2일)
2. 통계 정보 (1일)
3. 키보드 단축키 (1일)
4. 드래그 앤 드롭 + 최근 파일 (1일)

### Week 2: 핵심 기능 강화
5. 2D 마우스 조작 (2-3일)
6. 에러/경고 시스템 (2-3일)
7. M 코드 지원 (1일)

### Week 3: 프로페셔널 터치
8. 측정 도구 (2일)
9. 뷰포트 프리셋 (1일)
10. 설정 대화상자 (1일)
11. 북마크 시스템 (1일)

### Week 4: 킬러 기능
12. 재료 제거 시뮬레이션 (5-7일)

---

## 💡 핵심 제안

### 프로페셔널이 되기 위한 3가지 핵심 기능

1. **재료 제거 시뮬레이션** ⭐⭐⭐⭐⭐
   - 가장 큰 차별화 요소
   - CAMotics, Vericut의 핵심

2. **에러 감지** ⭐⭐⭐⭐⭐
   - 안전성과 신뢰성
   - 범위 초과, 충돌 체크

3. **공구 관리** ⭐⭐⭐⭐⭐
   - CNC의 기본
   - T 코드, 공구 라이브러리

### 1주 안에 큰 효과 (Quick Wins)
- 공구 관리
- 통계 정보
- 단축키
- 2D 마우스 조작
- 드래그 앤 드롭
- 최근 파일

---

## 📚 참고 자료

- [CAMotics - Open Source G-Code Simulator](https://camotics.org/)
- [Vericut - G-Code Simulator Guide](https://vericut.com/resources/guides/g-code-simulator/)
- [NC Viewer - GCode Viewer](https://ncviewer.com/)
- [CNC Cookbook - GCode Viewer](https://www.cnccookbook.com/gcode-viewer/)

---

**마지막 업데이트**: 2025-12-12
